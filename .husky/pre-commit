echo "Starting pre-commit checks..."

# Check if the current branch is master
current_branch=$(git rev-parse --abbrev-ref HEAD)
if [ "$current_branch" != "master" ]; then
    echo "Pre-commit checks are only executed on the master branch. Skipping..."
    exit 0
fi

echo "Running cleanup..."
npm run clean
if [ $? -ne 0 ]; then
    echo "Cleanup failed. Please fix the errors before committing."
    exit 1
fi

echo "Running lint check..."
npm run lint
if [ $? -ne 0 ]; then
    echo "Lint check failed. Please fix the errors before pushing."
    exit 1
fi

echo "Staging changes..."
git add .

echo "Pre-commit checks passed. Committing changes."
