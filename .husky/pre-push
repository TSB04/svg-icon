echo "Starting pre-push checks..."

# Check if the current branch is master
current_branch=$(git rev-parse --abbrev-ref HEAD)
if [ "$current_branch" != "master" ]; then
    echo "Not on master branch. Skipping pre-push checks."
    exit 0
fi

echo "Running build..."
npm run build
if [ $? -ne 0 ]; then
    echo "Build failed. Please fix the errors before pushing."
    exit 1
fi

echo "Running tests..."
npm run test
if [ $? -ne 0 ]; then
    echo "Tests failed. Please fix the errors before pushing."
    exit 1
fi

echo "Pre-push checks passed. Committing changes."